package main

import (
	"fmt"
)

func main() {
	fmt.Println("=== ä»£ç æ”¹åŠ¨åˆ†æå’Œæ½œåœ¨é—®é¢˜æ£€æŸ¥ ===\n")
	
	// ç”¨æˆ·æ”¹åŠ¨æ€»ç»“
	fmt.Println("ğŸ“‹ ç”¨æˆ·æ”¹åŠ¨æ€»ç»“:")
	fmt.Println("1. å°†å‘é‡è·å–é€»è¾‘ç§»å…¥ä¸åŒçš„æœç´¢åˆ†æ”¯")
	fmt.Println("2. Hybrid Search: GetVectors(task.NQ + 1)")
	fmt.Println("3. Normal Search: GetVectors(task.NQ)")
	fmt.Println("4. ç§»é™¤äº†å‘é‡æ•°é‡æ£€æŸ¥å’Œå›é€€é€»è¾‘")
	fmt.Println()
	
	// æ”¹åŠ¨å‰åå¯¹æ¯”
	fmt.Println("ğŸ”„ æ”¹åŠ¨å‰åå¯¹æ¯”:")
	fmt.Println()
	fmt.Println("â”Œâ”€ æ”¹åŠ¨å‰ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”")
	fmt.Println("â”‚ // ç»Ÿä¸€è·å–å‘é‡                         â”‚")
	fmt.Println("â”‚ queryVectors := GetVectors(task.NQ)    â”‚")
	fmt.Println("â”‚                                         â”‚")
	fmt.Println("â”‚ if hybrid:                              â”‚")
	fmt.Println("â”‚   vector2 := vectors[0] // default     â”‚")
	fmt.Println("â”‚   if len(vectors) > 1:                 â”‚")
	fmt.Println("â”‚     vector2 = vectors[1]               â”‚")
	fmt.Println("â”‚   annReq2 = NewAnnRequest(..., vector2)â”‚")
	fmt.Println("â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜")
	fmt.Println()
	fmt.Println("â”Œâ”€ æ”¹åŠ¨å â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”")
	fmt.Println("â”‚ if hybrid:                              â”‚")
	fmt.Println("â”‚   queryVectors := GetVectors(NQ + 1)   â”‚")
	fmt.Println("â”‚   annReq1 = NewAnnRequest(..., vec[0]) â”‚")
	fmt.Println("â”‚   annReq2 = NewAnnRequest(..., vec[1]) â”‚")
	fmt.Println("â”‚ else:                                   â”‚")
	fmt.Println("â”‚   queryVectors := GetVectors(NQ)       â”‚")
	fmt.Println("â”‚   searchOpt = NewSearchOption(..., vecs)â”‚")
	fmt.Println("â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜")
	fmt.Println()
	
	// ä¼˜ç‚¹åˆ†æ
	fmt.Println("âœ… æ”¹åŠ¨çš„ä¼˜ç‚¹:")
	fmt.Println("â€¢ ä»£ç é€»è¾‘æ›´åŠ æ¸…æ™°ï¼Œå„å¸å…¶èŒ")
	fmt.Println("â€¢ æ¶ˆé™¤äº†å‘é‡æ•°é‡æ£€æŸ¥çš„å¤æ‚é€»è¾‘")
	fmt.Println("â€¢ Hybrid Search æ˜ç¡®è·å– NQ+1 ä¸ªå‘é‡")
	fmt.Println("â€¢ Normal Search ç²¾ç¡®è·å– NQ ä¸ªå‘é‡")
	fmt.Println("â€¢ é¿å…äº†å‘é‡å›é€€çš„è¾¹ç•Œæƒ…å†µ")
	fmt.Println()
	
	// æ½œåœ¨é—®é¢˜æ£€æŸ¥
	fmt.Println("ğŸ” æ½œåœ¨é—®é¢˜åˆ†æ:")
	fmt.Println()
	fmt.Println("â“ é—®é¢˜1: task.NQ è¾¹ç•Œå€¼æ£€æŸ¥")
	fmt.Println("â”œâ”€ å¦‚æœ task.NQ = 0:")
	fmt.Println("â”‚  â”œâ”€ Hybrid: GetVectors(1) â†’ è·å–1ä¸ªå‘é‡")
	fmt.Println("â”‚  â”‚  â””â”€ vectors[0] âœ… å®‰å…¨, vectors[1] âŒ è¶Šç•Œ!")
	fmt.Println("â”‚  â””â”€ Normal: GetVectors(0) â†’ è·å–0ä¸ªå‘é‡")
	fmt.Println("â”‚     â””â”€ vectors = [] â†’ NewSearchOption å¯èƒ½å‡ºé”™")
	fmt.Println("â”‚")
	fmt.Println("â”œâ”€ å¦‚æœ task.NQ = 1:")
	fmt.Println("â”‚  â”œâ”€ Hybrid: GetVectors(2) â†’ è·å–2ä¸ªå‘é‡")
	fmt.Println("â”‚  â”‚  â””â”€ vectors[0] âœ… å®‰å…¨, vectors[1] âœ… å®‰å…¨")
	fmt.Println("â”‚  â””â”€ Normal: GetVectors(1) â†’ è·å–1ä¸ªå‘é‡")
	fmt.Println("â”‚     â””â”€ vectors = [vec1] âœ… æ­£å¸¸")
	fmt.Println("â”‚")
	fmt.Println("â””â”€ ç»“è®º: NQ=0 æ—¶ Hybrid Search ä¼šæœ‰æ•°ç»„è¶Šç•Œé£é™©!")
	fmt.Println()
	
	fmt.Println("â“ é—®é¢˜2: GetVectors æ–¹æ³•å…¼å®¹æ€§")
	fmt.Println("â”œâ”€ GetVectors(0) è¡Œä¸º:")
	fmt.Println("â”‚  â””â”€ result = make([][]float32, 0) â†’ è¿”å›ç©ºæ•°ç»„")
	fmt.Println("â”‚     â””â”€ å¯¹ Normal Search å¯èƒ½æœ‰é—®é¢˜")
	fmt.Println("â”‚")
	fmt.Println("â”œâ”€ GetVectors(1) è¡Œä¸º:")
	fmt.Println("â”‚  â””â”€ result = make([][]float32, 1) â†’ è¿”å›1ä¸ªå‘é‡")
	fmt.Println("â”‚     â””â”€ å¯¹ Hybrid Search è®¿é—® vectors[1] ä¼šè¶Šç•Œ")
	fmt.Println("â”‚")
	fmt.Println("â””â”€ ç»“è®º: GetVectors æ–¹æ³•æœ¬èº«æ²¡é—®é¢˜ï¼Œé—®é¢˜åœ¨ä½¿ç”¨æ–¹å¼")
	fmt.Println()
	
	fmt.Println("â“ é—®é¢˜3: ä»£ç ä¸­çš„ nq å€¼æ¥æº")
	fmt.Println("â”œâ”€ å½“å‰ nq åœ¨ä»£ç ä¸­æ˜¯ hardcoded = 1")
	fmt.Println("â”‚  â””â”€ task.NQ = 1")
	fmt.Println("â”‚")
	fmt.Println("â”œâ”€ Hybrid Search åœºæ™¯:")
	fmt.Println("â”‚  â”œâ”€ GetVectors(1 + 1) = GetVectors(2)")
	fmt.Println("â”‚  â”œâ”€ vectors = [vec1, vec2]")
	fmt.Println("â”‚  â”œâ”€ vectors[0] = vec1 âœ…")
	fmt.Println("â”‚  â””â”€ vectors[1] = vec2 âœ…")
	fmt.Println("â”‚")
	fmt.Println("â”œâ”€ Normal Search åœºæ™¯:")
	fmt.Println("â”‚  â”œâ”€ GetVectors(1)")
	fmt.Println("â”‚  â””â”€ vectors = [vec1] âœ…")
	fmt.Println("â”‚")
	fmt.Println("â””â”€ ç»“è®º: å½“å‰ nq=1 çš„æƒ…å†µä¸‹æ˜¯å®‰å…¨çš„")
	fmt.Println()
	
	// é£é™©è¯„ä¼°
	fmt.Println("âš ï¸ é£é™©è¯„ä¼°:")
	fmt.Println()
	fmt.Println("ğŸ”´ é«˜é£é™©:")
	fmt.Println("â€¢ å¦‚æœæœªæ¥å°† nq è®¾ä¸ºå¯é…ç½®ï¼Œä¸”è®¾ä¸º 0")
	fmt.Println("â€¢ Hybrid Search ä¼šåœ¨ vectors[1] å¤„æ•°ç»„è¶Šç•Œ")
	fmt.Println()
	fmt.Println("ğŸŸ¡ ä¸­é£é™©:")
	fmt.Println("â€¢ Normal Search çš„ GetVectors(0) è¿”å›ç©ºæ•°ç»„")
	fmt.Println("â€¢ å¯èƒ½å¯¼è‡´ NewSearchOption çš„é¢„æœŸå¤–è¡Œä¸º")
	fmt.Println()
	fmt.Println("ğŸŸ¢ ä½é£é™©:")
	fmt.Println("â€¢ å½“å‰ nq=1 hardcodedï¼Œä»£ç è¿è¡Œæ­£å¸¸")
	fmt.Println("â€¢ GetVectors æ–¹æ³•æœ¬èº«æ˜¯å¥å£®çš„")
	fmt.Println()
	
	// å»ºè®®ä¿®å¤
	fmt.Println("ğŸ”§ å»ºè®®ä¿®å¤:")
	fmt.Println()
	fmt.Println("æ–¹æ¡ˆ1: æ·»åŠ è¾¹ç•Œæ£€æŸ¥")
	fmt.Println("```go")
	fmt.Println("if task.SearchType == \"hybrid\" {")
	fmt.Println("    if task.NQ <= 0 {")
	fmt.Println("        log.Printf(\"âŒ Invalid NQ for hybrid search: %d\", task.NQ)")
	fmt.Println("        result.Error = \"NQ must be > 0 for hybrid search\"")
	fmt.Println("        return result")
	fmt.Println("    }")
	fmt.Println("    queryVectors := sw.vectorPool.GetVectors(task.NQ + 1)")
	fmt.Println("    // ... rest of the code")
	fmt.Println("}")
	fmt.Println("```")
	fmt.Println()
	fmt.Println("æ–¹æ¡ˆ2: ç¡®ä¿æœ€å°å‘é‡æ•°é‡")
	fmt.Println("```go")
	fmt.Println("if task.SearchType == \"hybrid\" {")
	fmt.Println("    vectorCount := max(task.NQ + 1, 2)  // è‡³å°‘éœ€è¦2ä¸ªå‘é‡")
	fmt.Println("    queryVectors := sw.vectorPool.GetVectors(vectorCount)")
	fmt.Println("    // ... rest of the code")
	fmt.Println("}")
	fmt.Println("```")
	fmt.Println()
	
	// æ€»ç»“
	fmt.Println("ğŸ“ æ€»ç»“:")
	fmt.Println("âœ… ç”¨æˆ·çš„æ”¹åŠ¨åœ¨å½“å‰ nq=1 çš„æƒ…å†µä¸‹æ˜¯å®‰å…¨å’Œæ­£ç¡®çš„")
	fmt.Println("âœ… ä»£ç é€»è¾‘æ›´åŠ æ¸…æ™°ï¼Œæ€§èƒ½æ›´å¥½")
	fmt.Println("âš ï¸  éœ€è¦æ³¨æ„æœªæ¥å¦‚æœ nq å˜ä¸ºå¯é…ç½®æ—¶çš„è¾¹ç•Œæƒ…å†µ")
	fmt.Println("ğŸ’¡ å»ºè®®æ·»åŠ ç®€å•çš„è¾¹ç•Œæ£€æŸ¥ä»¥æé«˜ä»£ç å¥å£®æ€§")
}
